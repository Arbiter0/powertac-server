<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>PowerTAC Visualizer</title>
	<ui:insert name="headInclude" />
	<h:outputScript library="js" name="scripts.js" />
	<h:outputStylesheet library="css" name="visualizer.css" />
	<h:outputScript library="js" name="highcharts.js"/>
	<h:outputScript library="js" name="highstock.js"/>
	<h:outputScript library="js/modules" name="exporting.js"/>
	<script type="text/javascript">
		var cashChartGlobal;
		var subscriptionsPieChart;
	</script>
	<ui:insert name="headIncludes" />

</h:head>
<h:body>

	<p:layout id="mainLayout" fullPage="true" stateful="true">
		<p:layoutUnit id="north" position="north" size="80" collapsible="true"
			header="LOL" styleClass="custom" resizable="true">
			<ui:include src="/WEB-INF/tags/logo.xhtml" />
			<h:form id="northForm">
				<table cellspacing="5" align="right">
					<tr>
						<th>Time:</th>
						<th>Timeslot:</th>
						<th>Name:</th>
						<th>Description:</th>
						
						
						
					</tr>
					<tr>
					<td><h:outputLabel value="#{visualizerBean.timeslotUpdate.postedTime.millis}" >
						<f:convertDateTime type="both" pattern="HH:mm, E, MMM d, y"/>
						</h:outputLabel>  </td> 
						<td>#{visualizerBean.currentTimeslotSerialNumber}</td>
						<td>#{visualizerBean.competition.name}</td>
						<td>#{visualizerBean.competition.description}</td>
						
						<td><p:button icon="ui-icon-wrench" title="Go to the Admin page." href="competitioncontrol"/>	</td>

					</tr>
				</table>

			</h:form>
		</p:layoutUnit>

		<p:layoutUnit position="center" size="800" resizable="true">
			<h2 class="alt" style="text-align: center;">

				<ui:insert name="title"></ui:insert>

			</h2>

			<ui:insert name="content" />

		</p:layoutUnit>

		<p:layoutUnit position="east" size="400" collapsible="true"
			header="LOL" styleClass="custom" resizable="true">

			<ui:include src="/WEB-INF/tags/tableBrokers.xhtml" />
			<ui:include src="/WEB-INF/tags/cashChartGlobal.xhtml" />
			<ui:include src="/WEB-INF/tags/subscriptionsPieChart.xhtml" />
			<p:lineChart style="height: 1px; width: 1px;"
				value="#{imageControl.fakeChart}" rendered="false" />

		</p:layoutUnit>

		<p:layoutUnit position="south" size="20" >
			<p:dock>
				<p:menuitem value="Game Overview"
					icon="/app/resources/resources/images/dock/eye.png"
					url="gameoverview" />
				<p:menuitem value="Brokers"
					icon="/app/resources/resources/images/dock/brokers.png"
					url="brokers" />
				<p:menuitem value="Customers"
					icon="/app/resources/resources/images/dock/customers.png"
					url="customers" />
				<p:menuitem value="GenCos"
					icon="/app/resources/resources/images/dock/gencos.png" url="gencos" />
				<p:menuitem value="Wholesale"
					icon="/app/resources/resources/images/dock/wholesale.png"
					url="wholesale" />
			</p:dock>
		</p:layoutUnit>

	</p:layout>

	<h:form>
		<p:poll autoStart="true" interval="5"
			update=":tableBrokersForm,:northForm, :cashChartGlobalForm, :subscriptionsPieChartForm" />
	</h:form>

</h:body>

</html>
