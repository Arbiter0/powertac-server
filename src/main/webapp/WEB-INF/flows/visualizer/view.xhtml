<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>PowerTAC Visualizer</title>
	<link rel="stylesheet"
		href="${request.contextPath}/app/resources/styles/blueprint/screen.css"
		type="text/css" media="screen, projection" />
	<link rel="stylesheet"
		href="${request.contextPath}/app/resources/styles/blueprint/print.css"
		type="text/css" media="print" />

	<ui:insert name="headIncludes" />
</h:head>
<h:body>

	<p:layout fullPage="true">

		<p:layoutUnit position="north" size="125" collapsible="true">
			<p:layout id="top">
				<p:layoutUnit position="west">
					<p:graphicImage value="${imageBean.logoPath}" height="87"
						width="272" />
				</p:layoutUnit>

				<p:layoutUnit position="center">
					<!-- xxxxxxxxxxxxxxxxxxxxxxxx COMPETITION INFO xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
					<h:form id="competitionForm">
						<h:panelGrid id="generalInfo" columns="2">
							<p:panel id="boardCompetitionInfo">

								<h:outputLabel value="Competition name:	" />
								<h:outputText value="#{visualizerBean.competition.name}" />
								<br />
								<h:outputLabel value="Description:	" />
								<h:outputText value=" #{visualizerBean.competition.description}" />
								<br />
								<h:outputLabel value="Timeslot counter:	" />
								<h:outputText value="#{visualizerBean.timeslotCount}" />

							</p:panel>
							<!-- <p:panel>

								<h:outputLabel value="Simulation status:	" />
								<h:outputText value="#{competition.name}" />
								<br />
								<h:outputLabel value="Description:	" />
								<h:outputText value=" #{competition.description}" />
								<br />
								<h:outputLabel value="Current timeslot:	" />
								<h:outputText value="TODO" />

							</p:panel>  -->
						</h:panelGrid>
						<p:poll id="customerPoller" interval="5" autoStart="true"
							update="generalInfo" />
					</h:form>

				</p:layoutUnit>
			</p:layout>

		</p:layoutUnit>

		<p:layoutUnit position="south" size="250" header="South">

			<p:layout id="bottom">

				<p:layoutUnit position="west" size="500">


					<!-- xxxxxxxxxxxxxxxxxxxxxxxx CUSTOMERS xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
					<h:form id="centerForm">
						<h:form id="carouselForm">
							<p:outputPanel id="customersPanel">
								<p:carousel id="customersCurousel" headerText="Customers"
									rendered="#{customerBackingBean.allowCarouselRendering}"
									value="#{visualizerBean.customers}" var="customer" rows="2"
									circular="true">
									<p:panel>

										<h:outputLabel value="Name: " />
										<h:outputText value="#{customer.name}" />
										<br />
										<h:outputLabel value="Customer Type: " />
										<h:outputText value="#{customer.customerType}" />
										<br />
										<h:outputLabel value="Population: " />
										<h:outputText value="#{customer.population}" />



									</p:panel>

								</p:carousel>
							</p:outputPanel>
							<p:poll widgetVar="customersPoller" id="customerPollerID"
								interval="10" autoStart="true" update="customersPanel" />

						</h:form>

					</h:form>

				</p:layoutUnit>

				<p:layoutUnit position="center" header="Weather information">
					<h:form id="weatherForm">
						<!-- xxxxxxxxxx		WEATHER REPORT		xxxxxxxxxxxxxxxxxxxxxxxxxx -->

						<h:panelGroup id="weather" layout="box">

							<p:panel header="Report" style="float:left;width:300px">
								<!-- Important style for horizonatal placing -->

								<h:outputLabel value="Current timeslot:	" />
								<h:outputText
									value="#{visualizerBean.weatherReport.currentTimeslot.id}" />
								<br />
								<h:outputLabel value="Temperature:	" />
								<h:outputText
									value=" #{visualizerBean.weatherReport.temperature}" />
								<br />
								<h:outputLabel value="Wind direction:	" />
								<h:outputText
									value="#{visualizerBean.weatherReport.windDirection}" />
								<br />
								<h:outputLabel value="Wind speed:	" />
								<h:outputText value="#{visualizerBean.weatherReport.windSpeed}" />
								<br />
								<h:outputLabel value="Cloud cover:	" />
								<h:outputText value="#{visualizerBean.weatherReport.cloudCover}" />

							</p:panel>

							<p:panel header="Forecast" style="float:left;width:500px">
								<!-- xxxxxxxxxx		WEATHER FORECAST		xxxxxxxxxxxxxxxxxxxxxxxxxx -->
								<h:outputLabel value="TO-DO	" />
								<br />
								<br />
								<br />
								<br />
							</p:panel>
						</h:panelGroup>
						<p:poll id="weatherPoller" interval="5" autoStart="true"
							update="weather" />
					</h:form>


				</p:layoutUnit>

			</p:layout>

		</p:layoutUnit>

		<p:layoutUnit position="west" size="200" header="Menu"
			collapsible="true">

		</p:layoutUnit>

		<p:layoutUnit position="east" size="600">

			<h:form>

				<p:accordionPanel id="accordionBrokers"
					value="#{visualizerBean.brokers}" var="broker">

					<p:tab title="#{broker.name}">
						<p:panel>

							<p:lineChart value="#{broker.balanceChart}"
								seriesColors="${broker.appearance.colorCode}" />
						</p:panel>
					</p:tab>
				</p:accordionPanel>

				<p:poll autoStart="true" interval="4" update="accordionBrokers" />

			</h:form>

		</p:layoutUnit>

		<p:layoutUnit position="center" size="500">
			<h:form>
				<!-- xxxxxxxxxxxx BROKERS xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
				<p:ring value="#{visualizerBean.brokers}" var="broker"
					easing="easeInOutBack" id="brokersRing">

					<h:panelGrid id="brokerPanel${broker.id}" columns="1"
						style="text-align:center">
						<p:panel>
							<p:graphicImage value="${broker.appearance.iconLocation}"
								width="85" height="85" />

							<h:outputLabel value="#{broker.name}" />

							<br />

							<p:graphicImage value="${imageBean.offeredTarrifPath}"
								cache="true" height="15" width="15" />

							<h:outputLabel value="   #{broker.offeredTarrifsCount}" />

							<br />

							<p:graphicImage value="${imageBean.moneyPath}" cache="true"
								height="15" width="15">

							</p:graphicImage>

							<h:outputLabel value="#{broker.balance}" />



						</p:panel>

					</h:panelGrid>


				</p:ring>
				<p:poll autoStart="true" update="brokersRing" interval="3" />

			</h:form>


		</p:layoutUnit>

	</p:layout>

</h:body>

</html>

