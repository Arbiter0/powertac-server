<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/layouts/visualizer/master.xhtml">

	<ui:define name="title">Wholesale market</ui:define>

	<ui:define name="headIncludes">
		<!-- <h:outputScript library="js" name="wholesale.js" /> -->
		<script type="text/javascript">
		
		$(function () {
		    var allCtScatter;
		    $(document).ready(function() {
		    	allCtScatter = new Highcharts.Chart({
		            chart: {
		                renderTo: 'allCtScatterContainer',
		                type: 'scatter',
		                zoomType: 'xy'
		            },
		            title: {
		                text: 'Market Transactions'
		            },
		            subtitle:{
		            	text: 'hint: select the area to zoom-in'
		            },
		          
		            xAxis: {
		                title: {
		                    enabled: true,
		                    text: 'Price (&euro;)'
		                },
		                startOnTick: true,
		                endOnTick: true,
		                showLastLabel: true
		            },
		            yAxis: {
		                title: {
		                    text: 'Quantity (MWh)'
		                }
		            },
		            tooltip: {
		                formatter: function() {
		                	var xRound=Math.round(this.x*100)/100;
		                	var yRound=Math.round(this.y*100)/100;
		                        return ''+
		                         yRound +' MWh ' + xRound+' &euro;, ';
		                }
		            },
		            legend: {
		                layout: 'vertical',
		                align: 'left',
		                verticalAlign: 'top',
		                x: 100,
		                y: 70,
		                floating: true,
		                backgroundColor: '#FFFFFF',
		                borderWidth: 1
		            },
		            plotOptions: {
		                scatter: {
		                    marker: {
		                        radius: 5,
		                        states: {
		                            hover: {
		                                enabled: true,
		                                lineColor: 'rgb(100,100,100)'
		                            }
		                        }
		                    },
		                    states: {
		                        hover: {
		                            marker: {
		                                enabled: false
		                            }
		                        }
		                    }
		                }
		            },
		            series: #{wholesaleBean.marketTransactionsJson}
		        });
		    });
		    
		});
		

					
		</script>




	</ui:define>

	<ui:define name="content">
		<h:form>
			<p:poll interval="5" update="@(.updateInvisiblePanel)" />
		</h:form>
	<div id="allCtScatterContainer" style="width: 700px;height: 550px;"/>
<div id="container" style="width: 500px;height: 450px;"/>


	</ui:define>

</ui:composition>