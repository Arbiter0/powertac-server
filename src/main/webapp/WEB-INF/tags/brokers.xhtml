<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui">


<h:body>
	<ui:fragment>


		<p:tabView id="tabBrokers" var="broker" value="#{visualizerBean.brokers}" dynamic="true" cache="true">

			<p:tab title="#{broker.name}">

				<h:panelGrid columns="3" cellpadding="10">
					<p:graphicImage value="${broker.appearance.iconLocation}" width="85" height="85" />

					<h:panelGrid columns="2" cellpadding="10">
						<h:outputText value="Name: " />
						<h:outputText value="#{broker.name}" style="font-weight: bold" />

						<h:outputText value="Cash balance: " />
						<h:outputText value="#{broker.cashBalance}" style="font-weight: bold" />

						<h:outputText value="Energy balance: " />
						<h:outputText value="#{broker.energyBalance}" style="font-weight: bold" />




					</h:panelGrid>

				</h:panelGrid>
				<div id="cashChart#{broker.id}" style="width: 700px; height: 250px"></div>

				<script type="text/javascript">
				
		 			if (window.cashChart#{broker.id}) {
						window.cashChart#{broker.id}.destroy();
						
					
					}
					window.cashChart#{broker.id} = $.jqplot('cashChart#{broker.id}', [ #{broker.cashBalanceJSONText} ],{
						title: 'Cash balance', 
						axesDefaults: {
						        labelRenderer: $.jqplot.CanvasAxisLabelRenderer},
						axes: {
							xaxis: {
						            label: "timeslot",
						            pad: 0},
						    yaxis: {
						            label: "cash"}},
						series:[#{broker.seriesOptions}],
						
						}); 
					</script>
						<div id="energyChart#{broker.id}" style="width: 700px; height: 250px"></div>

				<script type="text/javascript">
				
		 			if (window.energyChart#{broker.id}) {
						window.energyChart#{broker.id}.destroy();
						
					
					}
					window.energyChart#{broker.id} = $.jqplot('energyChart#{broker.id}', [ #{broker.energyBalanceJSONText} ],{
						title: 'Energy balance', 
						axesDefaults: {
						        labelRenderer: $.jqplot.CanvasAxisLabelRenderer},
						axes: {
							xaxis: {
						            label: "timeslot",
						            pad: 0},
						    yaxis: {
						            label: "energy"}},
						series:[#{broker.seriesOptions}],
						
						}); 
					</script>


	



			</p:tab>

		</p:tabView>




	</ui:fragment>
</h:body>

</html>

